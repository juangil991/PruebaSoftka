#pragma checksum "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "a50f2cf0065081793f2ee5ee4499c55c4719d23a"
// <auto-generated/>
#pragma warning disable 1591
namespace RetoFront.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using RetoFront;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Automatizacion\source\repos\RetoFront\_Imports.razor"
using RetoFront.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
using RetoFront.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
using RetoFront.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/preguntas")]
    public partial class Preguntas : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "nav");
            __builder.AddAttribute(1, "class", "navbar navbar-expand-lg navbar-dark bg-dark ");
            __builder.AddAttribute(2, "id", "mainNav");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "container px-4");
            __builder.OpenElement(5, "a");
            __builder.AddAttribute(6, "class", "navbar-brand text-left");
            __builder.AddAttribute(7, "style", "color:white");
            __builder.AddContent(8, "Dificultad: ");
#nullable restore
#line 11 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
__builder.AddContent(9, dificultad);

#line default
#line hidden
#nullable disable
            __builder.AddContent(10, "/ 5");
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\r\n        ");
            __builder.OpenElement(12, "a");
            __builder.AddAttribute(13, "class", "navbar-brand text-right");
            __builder.AddAttribute(14, "style", "color:white");
            __builder.AddContent(15, "Puntaje: ");
#nullable restore
#line 12 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
__builder.AddContent(16, puntaje);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 19 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
 if (Obtener != null && Obtener.Data != null)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(17, "header");
            __builder.AddAttribute(18, "class", " table");
            __builder.AddAttribute(19, "style", "color: white; background-image: linear-gradient(90deg, rgba(9,9,121,1) 0%, rgba(7,47,146,1) 17%, rgba(2,0,36,1) 73%, rgba(0,212,255,1) 100%); ");
            __builder.OpenElement(20, "div");
            __builder.AddAttribute(21, "class", "container pt-xl-5 text-center");
            __builder.OpenElement(22, "h1");
            __builder.AddAttribute(23, "class", "fw-bolder");
#nullable restore
#line 23 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
__builder.AddContent(24, Obtener.Data.Preguntas);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 27 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"

}

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
 if (Obtener2 != null && Obtener2.Data != null)
{

    

#line default
#line hidden
#nullable disable
#nullable restore
#line 33 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
     foreach (var Element2 in Obtener2.Data)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(25, "div");
            __builder.AddAttribute(26, "class", "custom-radio");
            __builder.AddAttribute(27, "style", @"background-image: linear-gradient(to right, #16222A 0%, #3A6073 51%, #16222A 100%);
            margin: 10px; padding: 15px 45px; text-align: center; text-transform: uppercase; transition: 0.5s; background-size: 200% auto;
            color: white; box-shadow: 0 0 20px #eee; border-radius: 10px; display: block; ");
            __builder.OpenElement(28, "label");
            __builder.OpenElement(29, "input");
            __builder.AddAttribute(30, "type", "radio");
            __builder.AddAttribute(31, "name", "Respuesta");
            __builder.AddAttribute(32, "value", 
#nullable restore
#line 39 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                             Element2.Id

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(33, "checked", 
#nullable restore
#line 39 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                                     Actualizar== Element2.Id

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(34, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 39 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                                                                           _=>getid(Element2.Correcta, Element2.Id)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddContent(35, " ");
#nullable restore
#line 39 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
__builder.AddContent(36, Element2.Respuestas);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 43 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"

    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 46 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
     if (SelectRespuesta == 1 && dificultad < 5)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(37, "tr");
            __builder.OpenElement(38, "td");
            __builder.AddAttribute(39, "style", "text-align:center");
            __builder.OpenElement(40, "button");
            __builder.AddAttribute(41, "class", "btn btn-primary");
            __builder.AddAttribute(42, "style", @"background-image: linear-gradient(to right, #314755 0%, #26a0da 51%, #314755 100%);
                margin: 10px; padding: 15px 45px; text-align: center; text-transform: uppercase; transition: 0.5s; background-size: 200% auto; color: white; box-shadow:
                0 0 20px #eee; border-radius: 10px; display: block;");
            __builder.AddAttribute(43, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 52 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                               OnInitializedAsync

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(44, "\r\n                    Siguiente\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(45, "\r\n                ");
            __builder.OpenElement(46, "button");
            __builder.AddAttribute(47, "class", "btn btn-primary");
            __builder.AddAttribute(48, "style", @"background-image: linear-gradient(to left, #314755 0%, #26a0da 51%, #314755 100%);
                margin: 10px; padding: 15px 45px; text-align: right; text-transform: uppercase; transition: 0.5s; background-size: 200% auto; color: white; box-shadow:
                0 0 20px #eee; border-radius: 10px; display: block;");
            __builder.AddAttribute(49, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 57 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                               GetPunt

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(50, "\r\n                    Terminar\r\n                ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 62 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(51, "tr");
            __builder.OpenElement(52, "td");
#nullable restore
#line 68 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                 if (Actualizar != 0)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(53, "button");
            __builder.AddAttribute(54, "class", "btn btn-primary");
            __builder.AddAttribute(55, "style", @"background-image: linear-gradient(to right, #314755 0%, #26a0da 51%, #314755 100%);
                margin: 10px; padding: 15px 45px; text-align: center; text-transform: uppercase; transition: 0.5s; background-size: 200% auto; color: white; box-shadow:
                0 0 20px #eee; border-radius: 10px; display: block;");
            __builder.AddAttribute(56, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 72 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                               Terminar

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(57, "\r\n                        Siguiente\r\n                    ");
            __builder.CloseElement();
#nullable restore
#line 75 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(58, "button");
            __builder.AddAttribute(59, "class", "btn btn-primary");
            __builder.AddAttribute(60, "style", @"background-image: linear-gradient(to right, #314755 0%, #26a0da 51%, #314755 100%);
                margin: 10px; padding: 15px 45px; text-align: right; text-transform: uppercase; transition: 0.5s; background-size: 200% auto; color: white; box-shadow:
                0 0 20px #eee; border-radius: 10px; display: block;");
            __builder.AddAttribute(61, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 78 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                               GetPunt

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(62, "\r\n                    Terminar\r\n                ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 83 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"

    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 84 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
     

}

#line default
#line hidden
#nullable disable
#nullable restore
#line 87 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
 if (ModalWindows == 1)
{


#line default
#line hidden
#nullable disable
            __builder.OpenComponent<RetoFront.Components.ModalRespuestas>(63);
            __builder.AddAttribute(64, "Title", "FELICIDADES!!!");
            __builder.AddAttribute(65, "Text", "Tu puntaje es de:");
            __builder.AddAttribute(66, "puntaje", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 90 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                               puntaje

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
#nullable restore
#line 91 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"

}

#line default
#line hidden
#nullable disable
#nullable restore
#line 93 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
 if (ModalWindows == 2)
{


#line default
#line hidden
#nullable disable
            __builder.OpenComponent<RetoFront.Components.ModalRespuestas>(67);
            __builder.AddAttribute(68, "Title", "HAS FALLADO INTENTA NUEVAMENTE");
            __builder.AddAttribute(69, "Text", "Tu puntaje es de:");
            __builder.AddAttribute(70, "puntaje", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 96 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
                                                                                               puntaje

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
#nullable restore
#line 97 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"

}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 101 "C:\Users\Automatizacion\source\repos\RetoFront\Pages\Preguntas.razor"
       


    public PreguntasRequest<PreguntasDb> Obtener = new PreguntasRequest<PreguntasDb>(); // obtinen pregunta aleatoria segun la dificultad
    public RespuestasRequest<List<RespuestasDb>> Obtener2 { get; set; } = new RespuestasRequest<List<RespuestasDb>>(); // obtiene el listado de respuestas asociados a la pregunta
    public PreguntasRequest<object> response = new PreguntasRequest<object>();
    public UsersRequest<object> UserResponse = new UsersRequest<object>();
    public UsersRequest<object> UserResponse2 = new UsersRequest<object>();
    public PreguntasDb send = new PreguntasDb(); // variable para actualizar el estado de las preguntas y no repetir ninguna
    public User Usersend = new User(); //usuario a enviar a la base de datos
    string url = "https://localhost:44376/api/Pregutas"; //url a la API de preguntas
    string url2 = "https://localhost:44376/api/Respuestas";  // url a la API de respuestas
    string url3 = "https://localhost:44376/api/Users"; //url a la API de usuarios
    int dificultad = 0; // dificultad/ronda de la pregunta
    int dificultad2; // respuestas asosicadas a la pregunta
    int SelectRespuesta; // (1: respuesta correcta 0:Respuesta incorrecta)
    int Actualizar; // se usa para actualizar el contenido del checkbox
    int puntaje; // variable que guarda el puntaje del juego
    int ModalWindows; //variable que se utiliza para llamar ventana emergente

    public RespuestasRequest<List<RespuestasDb>> pruebita { get; set; }

    //Funcion que se utiliza para obtener las preguntas y respuestas de la base de datos
    protected override async Task OnInitializedAsync()
    {
        dificultad = dificultad + 1; //aumenta dificultad/ronda
        Obtener = await http.GetFromJsonAsync<PreguntasRequest<PreguntasDb>>(url + "/" + dificultad);
        dificultad2 = Obtener.Data.Id;
        Obtener2 = await http.GetFromJsonAsync<RespuestasRequest<List<RespuestasDb>>>(url2 + "/" + dificultad2);
        SelectRespuesta = 0;
        Actualizar = 0;
        Obtener.Data.Estado = 1;
        send = Obtener.Data;
        var respond = await http.PutAsJsonAsync<PreguntasDb>(url, send);
        response = respond.Content.ReadFromJsonAsync<PreguntasRequest<object>>().Result;
        puntaje = puntaje + ((dificultad - 1) * 100);
    }


    // funcion que obtiene el valor de la respuesta (1: correcta 0: incorrecta) y el id de la pregunta seleccionada
    public void getid(int res, int id)
    {
        SelectRespuesta = res;
        Actualizar = id;
    }

    // funcion que se ejecuta al fallar o terminar el juego enviando el puntaje a la base de datos
    private async void Terminar()
    {
        if (SelectRespuesta == 1)
        {
            ModalWindows = 1;

        }
        else
        {
            puntaje = 0;
            ModalWindows = 2;

        }
        Usersend.Puntaje = puntaje;
        send.Estado = 99;
        var respond2 = await http.PutAsJsonAsync<User>(url3, Usersend);
        UserResponse2 = respond2.Content.ReadFromJsonAsync<UsersRequest<object>>().Result;



    }
    //funcion que se ejecuta al terminar el juego en cualquier momento y envia el puntaje actual  a la base de datos
    private async void GetPunt()
    {
        ModalWindows = 1;
        Usersend.Puntaje = puntaje;
        var respond = await http.PutAsJsonAsync<User>(url3, Usersend);
        UserResponse = respond.Content.ReadFromJsonAsync<UsersRequest<object>>().Result;

    }




#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager Navi { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
#pragma warning restore 1591
